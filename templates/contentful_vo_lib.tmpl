// DO NOT EDIT THIS FILE: Auto-generated code by https://github.com/foomo/contentful-erm
{{ $cfg := . }}{{ $locales := .Locales }}{{ $contentTypes := .ContentTypes }}
package {{ .PackageName }}

import (
	"errors"
	"github.com/foomo/contentful"
)

{{ range $index , $locale := $locales }}const spaceLocale{{ $locale.Name }} string = "{{ $locale.Code }}"
{{ end }}
{{ range $index , $locale := $locales }}{{ if $locale.Default }}const defaultLocale string = spaceLocale{{ $locale.Name }}{{ end }}
{{ end }}var spaceLocales []string = []string{ {{ range $index , $locale := $locales }}spaceLocale{{ $locale.Name }}, {{ end }} }

type contentfulClient struct {
	SpaceID string
	CDAKey  string
	CPAKey  string
	CMAKey  string
	CDA     *contentful.Contentful
	CPA     *contentful.Contentful
	CMA     *contentful.Contentful
	Debug   bool
}

func getContentfulClient(cc *contentfulClient) (ccOut *contentfulClient, err error) {
	if cc.SpaceID == "" {
		return nil, errors.New("GetContentfulClient: SpaceID cannot be empty")
	}
	if cc.CDAKey == "" && cc.CPAKey == "" && cc.CMAKey == "" {
		return nil, errors.New("GetContentfulClient: You must provide at least one API Key")
	}
	if cc.CDAKey != "" {
		cc.CDA = contentful.NewCDA(cc.CDAKey)
		cc.CDA.Debug = cc.Debug == true
	}
	if cc.CPAKey != "" {
		cc.CPA = contentful.NewCPA(cc.CDAKey)
		cc.CPA.Debug = cc.Debug == true
	}
	if cc.CMAKey != "" {
		cc.CMA = contentful.NewCMA(cc.CDAKey)
		cc.CPA.Debug = cc.Debug == true
	}
	return cc, nil
}
